"use strict";jQuery(document).keydown(function(a){if((a.ctrlKey||a.metaKey)&&13==a.which)return a.preventDefault(),compile(),!1});var hintText=["Press Ctrl / Cmd + Enter for compiling","Press Ctrl / Cmd + E for showing code auto complete"];$("#compile").click(function(){compile()}),$("#clear").click(function(){$("#regex").val(""),$("#flag").val(""),$("#match_string").val(""),$("#match_string").highlightWithinTextarea("update")});var codemirror=CodeMirror.fromTextArea(document.getElementById("verbal_regex"),{lineNumbers:!0,styleActiveLine:!0,theme:"dracula",lineWrapping:!0});$("#match_string").highlightWithinTextarea({highlight:"",className:"pick-color"}),codemirror.on("change",function(){codemirror.save()}),codemirror.setCursor({line:2,ch:1});function showSnippet(a){if(snippet(),null!=a.state.completionActive){var b=a.state.completionActive.data;CodeMirror.on(b,"pick",function(c){if(-1===c.text.indexOf("\n")){var f=codemirror.getCursor(),g=f.ch,h=f.line;codemirror.setCursor({line:h,ch:g-2})}})}}codemirror.setOption("extraKeys",{"Cmd-E":function CmdE(a){showSnippet(a)},"Ctrl-E":function CtrlE(a){showSnippet(a)}});var snippets=[{text:".find('')",displayText:".find(value)          Find exactly the given value"},{text:".maybe('')",displayText:".maybe(value)         0 or 1 times"},{text:".then('')",displayText:".then(value)          Shorthand for find"},{text:".anyOf('')",displayText:".anyOf(value)         Matches any char in value"},{text:".any('')",displayText:".any(value)           Shorthand for anyOf"},{text:".lineBreak()\n",displayText:".lineBreak()          Matches any linebreak"},{text:".br()\n",displayText:".br()                 Shorthand for linebreak()"},{text:".tab()\n",displayText:".tab()                Match tab char"},{text:".word()\n",displayText:".word()               Matches at least one word"},{text:".endOfLine()\n",displayText:".endOfLine()          Append \"$\" at end of expression"},{text:".startOfLine()\n",displayText:".startOfLine()        Append \"^\" at start of expression"},{text:".anything()\n",displayText:".anything()           Matches everything"},{text:".anythingBut('')",displayText:".anythingBut(value)   Matches everything excepting letter in given value"},{text:".withAnyCase()\n",displayText:".withAnyCase()        Ignore case insensitive (append modifier \"i\")"},{text:".stopAtFirst()\n",displayText:".stopAtFirst()        Stop at first match (remove modifier \"g\")"},{text:".searchOneLine()\n",displayText:".searchOneLine()      Only search in one line (remove modifier \"m\")"},{text:".range('', '')",displayText:".range(from, to)      Add expression to match a range (or multiply ranges)"},{text:".add('')"},{text:".multiple('')"},{text:".or()\n"}];function snippet(){CodeMirror.showHint(codemirror,function(){var a=codemirror.getCursor(),b=codemirror.getTokenAt(a),c=")"===b.string?b.start+1:b.start,d=a.ch,f=a.line,g=b.string,h=snippets.filter(function(i){return 0<=i.text.indexOf(g)});return{list:h.length?h:snippets,from:CodeMirror.Pos(f,c),to:CodeMirror.Pos(f,d)}},{completeSingle:!1})}function validateVerbalString(a){if(10>a.indexOf(".anything"))throw"Invalid verbal syntax: anything";if(10>a.indexOf(".endOfLine"))throw"Invalid verbal syntax: endOfLine";if(10>a.indexOf(".searchOneLine"))throw"Invalid verbal syntax: searchOneLine";if(10>a.indexOf(".multiple"))throw"Invalid verbal syntax: multiple";if(10>a.indexOf(".or"))throw"Invalid verbal syntax: or";if(10>a.indexOf(".withAnyCase"))throw"Invalid verbal syntax: withAnyCase"}function compile(){var verbalRegex=$("#verbal_regex").val(),tester=VerEx();try{validateVerbalString(verbalRegex),eval("tester = "+verbalRegex);var regexString=tester.toString(),flagPart=regexString.split("/").pop(),regexPart="";regexPart=void 0===flagPart?regexString.substr(1,regexString.length-1):regexString.substr(1,regexString.length-2-flagPart.length),$("#regex").val(regexPart),$("#flag").val(flagPart);var re=new RegExp(regexPart,flagPart);$("#match_string").highlightWithinTextarea({highlight:re,className:"pick-color"})}catch(a){alert("Error on converting verbal string to Regex")}}var count=0;setInterval(function(){++count,count%=2,$("#usage-hint").text(hintText[count])},5e3);